@import "tailwindcss";
@import "tw-animate-css";

@source "../../node_modules/streamdown/dist/index.js";

@custom-variant dark (&:is(.dark *));

/* ============================================================================
   MERIDIAN DESIGN SYSTEM - Themeable Architecture
   ============================================================================

   Theme system overview:
   - --theme-* variables are set by JavaScript (src/core/theme/useTheme.ts)
   - Semantic variables (--background, --foreground, etc.) reference --theme-*
   - Components use semantic variables, so theme changes propagate automatically
   - Fallback values ensure the app works before JS loads (modern-literary theme)

   To add new themes:
   1. Add a ThemePreset in src/core/theme/themes.ts
   2. The theme system handles CSS variable injection automatically

   See: _docs/hidden/handoffs/design-system-theme-architecture.md
   ============================================================================ */

@theme inline {
  /* === Core Colors === */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--jade-primary);
  --color-primary-foreground: var(--jade-foreground);
  --color-accent: var(--gold);
  --color-accent-foreground: var(--gold-foreground);
  --color-border: var(--border);
  --color-input: var(--input-border);
  --color-ring: var(--focus-ring);

  /* === Semantic Colors === */
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-error: var(--error);
  --color-error-foreground: var(--error-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);

  /* === Interactive States === */
  --color-hover: var(--hover);
  --color-active: var(--active);
  --color-disabled: var(--disabled);

  /* === UI Component Colors === */
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  /* === Sidebar (Jade Base) === */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-icon: var(--sidebar-icon);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* === Typography (bridged from theme system) === */
  --font-display: var(--theme-font-display, 'Cormorant Garamond', Georgia, serif);
  --font-body: var(--theme-font-body, 'Source Serif 4', Georgia, serif);
  --font-ui: var(--theme-font-ui, 'Manrope', system-ui, sans-serif);
  --font-sans: var(--font-ui);
  --font-serif: var(--font-body);
  --font-mono: ui-monospace, monospace;

  /* === Border Radius === */
  --radius-sm: 6px;
  --radius: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-xl: 16px;

  /* === Spacing (8pt grid) === */
  --spacing-1: 4px;
  --spacing-2: 8px;
  --spacing-3: 16px;
  --spacing-4: 24px;
  --spacing-5: 32px;
  --spacing-6: 48px;

  /* === Shadows (multi-layer) === */
  --shadow-1: var(--shadow-1-value);
  --shadow-2: var(--shadow-2-value);
  --shadow-3: var(--shadow-3-value);

  /* === Opacity Scale === */
  --opacity-disabled: 0.6;
  --opacity-hover: 0.08;
  --opacity-overlay: 0.6;
  --opacity-subtle: 0.2;

  /* === Animation === */
  --duration-fast: 150ms;
  --duration-medium: 200ms;
  --duration-slow: 250ms;
  --easing-default: cubic-bezier(0.4, 0, 0.2, 1);

  /* === Focus Ring Opacities === */
  --focus-outer-opacity: 0.28;
  --focus-inner-opacity: 0.12;
}

/* ============================================================================
   LIGHT MODE - Default theme fallbacks (Modern Literary)
   These values are used before JS loads, then overridden by theme system
   ============================================================================ */

:root {
  /* === Theme Variable Fallbacks (Modern Literary Light) === */
  /* Colors from: _docs/technical/frontend/themes/modern-literary.md */
  --theme-bg: #F9F6F0;           /* Warm paper */
  --theme-surface: #FFFDF8;      /* Off-white surface */
  --theme-text: #2C2418;         /* Warm ink */
  --theme-text-muted: #6B5D4D;   /* Warm muted brown */
  --theme-border: #E5DFD4;       /* Warm border */
  --theme-accent: #C8973E;       /* Antique gold */
  --theme-accent-hover: #B8872E;
  --theme-accent-foreground: #2C2418;
  --theme-primary: #C8973E;      /* Antique gold */
  --theme-primary-foreground: #2C2418;
  --theme-success: #2D5A47;
  --theme-success-foreground: #FFFFFF;
  --theme-warning: #DB9A30;
  --theme-warning-foreground: #2C2418;
  --theme-error: #C4785A;
  --theme-error-foreground: #FFFFFF;
  --theme-focus-ring-outer: rgba(200, 151, 62, 0.35);
  --theme-focus-ring-inner: rgba(200, 151, 62, 0.15);
  --theme-sidebar: #F3EFE7;      /* Warm sidebar */
  --theme-sidebar-foreground: #2C2418;
  --theme-sidebar-icon: #6B5D4D;
  --theme-sidebar-accent: #EDE8DE;
  --theme-sidebar-border: #E5DFD4;
  /* Warm lamp-like shadows */
  --theme-shadow-1: rgba(44, 36, 24, 0.06) 0px 1px 2px, rgba(44, 36, 24, 0.04) 0px 2px 6px;
  --theme-shadow-2: rgba(44, 36, 24, 0.08) 0px 4px 12px, rgba(44, 36, 24, 0.04) 0px 1px 3px;
  --theme-shadow-3: rgba(44, 36, 24, 0.12) 0px 8px 24px, rgba(44, 36, 24, 0.06) 0px 2px 8px;
  --theme-selection-bg: rgba(200, 151, 62, 0.25);
  --theme-selection-fg: #2C2418;
  /* Typography: Cormorant Garamond (display), Source Serif 4 (body), Manrope (UI) */
  --theme-font-display: 'Cormorant Garamond', Georgia, serif;
  --theme-font-body: 'Source Serif 4', Georgia, serif;
  --theme-font-ui: 'Manrope', system-ui, sans-serif;
  --theme-radius: 8px;

  /* Paper grain texture (subtle noise for light mode, disabled in dark) */
  --texture-grain: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  --texture-opacity: 0.03;

  /* === Semantic Variables (bridge to theme system) === */

  /* Core */
  --background: var(--theme-bg);
  --foreground: var(--theme-text);

  /* Primary */
  --jade-primary: var(--theme-primary);
  --jade-foreground: var(--theme-primary-foreground);

  /* Accent */
  --gold: var(--theme-accent);
  --gold-foreground: var(--theme-accent-foreground);

  /* Interactive States */
  --hover: color-mix(in srgb, var(--theme-accent) 8%, transparent);
  --active: var(--theme-primary);
  --disabled: #9A958A;

  /* Borders & Inputs */
  --border: var(--theme-border);
  --input-border: var(--theme-border);

  /* Focus Rings */
  --focus-ring-outer: var(--theme-focus-ring-outer);
  --focus-ring-inner: var(--theme-focus-ring-inner);
  --focus-ring: var(--focus-ring-outer);

  /* Cards & Popovers */
  --card: var(--theme-surface);
  --card-foreground: var(--theme-text);
  --popover: var(--theme-surface);
  --popover-foreground: var(--theme-text);

  /* Muted */
  --muted: color-mix(in srgb, var(--theme-bg) 50%, var(--theme-border) 50%);
  --muted-foreground: var(--theme-text-muted);

  /* Semantic Feedback */
  --success: var(--theme-success);
  --success-foreground: var(--theme-success-foreground);
  --success-wash: color-mix(in srgb, var(--theme-success) 10%, var(--theme-bg) 90%);

  --warning: var(--theme-warning);
  --warning-foreground: var(--theme-warning-foreground);
  --warning-wash: color-mix(in srgb, var(--theme-warning) 10%, var(--theme-bg) 90%);

  --error: var(--theme-error);
  --error-foreground: var(--theme-error-foreground);

  --info: var(--theme-primary);
  --info-foreground: var(--theme-primary-foreground);
  --info-wash: var(--success-wash);

  /* Sidebar */
  --sidebar: var(--theme-sidebar);
  --sidebar-foreground: var(--theme-sidebar-foreground);
  --sidebar-icon: var(--theme-sidebar-icon);
  --sidebar-accent: var(--theme-sidebar-accent);
  --sidebar-accent-foreground: var(--theme-sidebar-foreground);
  --sidebar-border: var(--theme-sidebar-border);
  --sidebar-ring: var(--theme-accent);

  /* Shadows */
  --shadow-1-value: var(--theme-shadow-1);
  --shadow-2-value: var(--theme-shadow-2);
  --shadow-3-value: var(--theme-shadow-3);

  /* Selection & Highlights */
  --selection-bg: var(--theme-selection-bg);
  --selection-fg: var(--theme-selection-fg);
}

/* ============================================================================
   DARK MODE - Default dark theme fallbacks (Modern Literary Dark)
   These are CSS-only fallbacks; the theme system sets --theme-* variables via JS
   ============================================================================ */

.dark {
  /* === Theme Variable Fallbacks (Modern Literary Dark) === */
  /* Colors from: _docs/technical/frontend/themes/modern-literary.md */
  --theme-bg: #1C1917;           /* Espresso/ink */
  --theme-surface: #252220;      /* Warm charcoal */
  --theme-text: #F0EBE3;         /* Warm cream */
  --theme-text-muted: #A89E8E;   /* Warm muted */
  --theme-border: #3A3530;       /* Warm border */
  --theme-accent: #E4B866;       /* Warm amber */
  --theme-accent-hover: #F0C87A;
  --theme-accent-foreground: #1C1917;
  --theme-primary: #E4B866;      /* Warm amber */
  --theme-primary-foreground: #1C1917;
  --theme-success: #4A8F72;
  --theme-success-foreground: #1C1917;
  --theme-warning: #F0B042;
  --theme-warning-foreground: #1C1917;
  --theme-error: #D4896B;
  --theme-error-foreground: #1C1917;
  --theme-focus-ring-outer: rgba(228, 184, 102, 0.30);
  --theme-focus-ring-inner: rgba(228, 184, 102, 0.12);
  --theme-sidebar: #14120F;      /* Deep sidebar */
  --theme-sidebar-foreground: #F0EBE3;
  --theme-sidebar-icon: #A89E8E;
  --theme-sidebar-accent: #2A2724;
  --theme-sidebar-border: #3A3530;
  /* Reading lamp glow shadows */
  --theme-shadow-1: rgba(0, 0, 0, 0.30) 0px 1px 2px, rgba(228, 184, 102, 0.03) 0px 1px 0px inset;
  --theme-shadow-2: rgba(0, 0, 0, 0.40) 0px 4px 16px, rgba(228, 184, 102, 0.05) 0px 0px 0px 1px;
  --theme-shadow-3: rgba(0, 0, 0, 0.50) 0px 8px 32px, rgba(228, 184, 102, 0.08) 0px 0px 24px;
  --theme-selection-bg: rgba(228, 184, 102, 0.35);
  --theme-selection-fg: #F0EBE3;

  /* Disable paper grain in dark mode */
  --texture-opacity: 0;

  /* === Semantic Variables (same bridge as light, but referencing updated --theme-* values) === */

  /* Core */
  --background: var(--theme-bg);
  --foreground: var(--theme-text);

  /* Primary */
  --jade-primary: var(--theme-primary);
  --jade-foreground: var(--theme-primary-foreground);

  /* Accent */
  --gold: var(--theme-accent);
  --gold-foreground: var(--theme-accent-foreground);

  /* Glow accent for AI elements in dark mode */
  --glow-jade: var(--theme-accent);

  /* Interactive States */
  --hover: color-mix(in srgb, var(--theme-accent) 8%, transparent);
  --active: var(--theme-primary);
  --disabled: #7E857F;

  /* Borders & Inputs */
  --border: var(--theme-border);
  --input-border: var(--theme-border);

  /* Focus Rings */
  --focus-ring-outer: var(--theme-focus-ring-outer);
  --focus-ring-inner: var(--theme-focus-ring-inner);
  --focus-ring: var(--focus-ring-outer);

  /* Cards & Popovers */
  --card: var(--theme-surface);
  --card-foreground: var(--theme-text);
  --popover: var(--theme-surface);
  --popover-foreground: var(--theme-text);

  /* Muted */
  --muted: color-mix(in srgb, var(--theme-bg) 70%, var(--theme-border) 30%);
  --muted-foreground: var(--theme-text-muted);

  /* Semantic Feedback */
  --success: var(--theme-success);
  --success-foreground: var(--theme-success-foreground);
  --success-wash: color-mix(in srgb, var(--theme-success) 15%, var(--theme-bg) 85%);

  --warning: var(--theme-warning);
  --warning-foreground: var(--theme-warning-foreground);
  --warning-wash: color-mix(in srgb, var(--theme-warning) 15%, var(--theme-bg) 85%);

  --error: var(--theme-error);
  --error-foreground: var(--theme-error-foreground);

  --info: var(--theme-primary);
  --info-foreground: var(--theme-primary-foreground);
  --info-wash: var(--success-wash);

  /* Sidebar */
  --sidebar: var(--theme-sidebar);
  --sidebar-foreground: var(--theme-sidebar-foreground);
  --sidebar-icon: var(--theme-sidebar-icon);
  --sidebar-accent: var(--theme-sidebar-accent);
  --sidebar-accent-foreground: var(--theme-sidebar-foreground);
  --sidebar-border: var(--theme-sidebar-border);
  --sidebar-ring: var(--theme-accent);

  /* Shadows */
  --shadow-1-value: var(--theme-shadow-1);
  --shadow-2-value: var(--theme-shadow-2);
  --shadow-3-value: var(--theme-shadow-3);

  /* Selection & Highlights */
  --selection-bg: var(--theme-selection-bg);
  --selection-fg: var(--theme-selection-fg);
}

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Text selection */
  ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-fg);
  }

  /* Minimal scrollbar styling */
  * {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  *:hover {
    scrollbar-color: var(--border) transparent;
  }

  /* Webkit scrollbar styling (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: transparent;
    border-radius: 4px;
  }

  *:hover::-webkit-scrollbar-thumb {
    background: var(--border);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--muted-foreground);
  }

  /* Focus ring strategy - only for interactive elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  [role="button"]:focus-visible,
  [role="menuitem"]:focus-visible,
  [role="tab"]:focus-visible,
  [role="checkbox"]:focus-visible,
  [role="switch"]:focus-visible {
    outline: 3px solid var(--focus-ring-outer);
    outline-offset: 2px;
    box-shadow: 0 0 0 2px var(--focus-ring-inner);
  }

  /* Paper grain texture overlay (subtle in light mode, disabled in dark) */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: var(--texture-grain);
    opacity: var(--texture-opacity);
    pointer-events: none;
    z-index: 9999;
  }

  /* Restore cursor: pointer for buttons and menu items (Tailwind v4 changed to cursor: default)
     See: https://ui.shadcn.com/docs/components/button */
  button:not(:disabled),
  [role="button"]:not(:disabled),
  [role="menuitem"]:not([aria-disabled="true"]) {
    cursor: pointer;
  }

  button:disabled,
  [role="button"]:disabled,
  [role="menuitem"][aria-disabled="true"] {
    cursor: not-allowed;
  }
}

/* Prevent animations during initial page load / hydration */
body.preload * {
  transition: none !important;
  animation-duration: 0s !important;
}

/* ============================================================================
   COMPONENT LAYER - Custom Components
   ============================================================================ */

@layer components {
  /* === Typography Utilities (shared front + workspace) === */

  .type-display {
    @apply font-serif font-semibold;
    font-size: 20px;
    line-height: 1.3;
  }

  .type-section {
    @apply font-serif font-semibold;
    font-size: 18px;
    line-height: 1.35;
  }

  .type-body {
    @apply font-serif;
    font-size: 15px;
    line-height: 1.5;
  }

  .type-label {
    @apply font-sans font-medium;
    font-size: 13px;
    line-height: 1.4;
  }

  .type-meta {
    @apply font-sans;
    font-size: 12px;
    line-height: 1.4;
    color: var(--muted-foreground);
  }

  /* === Literary Typography Enhancements === */

  /* Drop cap for first paragraph in prose - apply .prose-drop-cap to container */
  .prose-drop-cap p:first-of-type::first-letter {
    font-family: var(--font-display);
    font-size: 3.5em;
    float: left;
    line-height: 0.8;
    padding-right: 0.1em;
    padding-top: 0.1em;
    color: var(--theme-accent);
  }

  /* Scene break decoration (· · ·) */
  .scene-break {
    @apply text-center my-8;
    color: var(--theme-accent);
    font-family: var(--font-display);
    letter-spacing: 0.5em;
  }

  /* === Chat Pane (Left Sidebar) === */

  .chat-pane {
    @apply bg-sidebar text-sidebar-foreground;
  }

  .chat-pane-header {
    @apply bg-sidebar/80;
  }

  .chat-pane-body {
    @apply overflow-hidden;
  }

  .chat-pane-scroll {
    @apply h-full;
  }

  .chat-pane-empty {
    @apply text-xs text-sidebar-foreground/70;
  }

  .chat-list-item {
    @apply cursor-pointer text-xs transition-colors duration-[--duration-fast];
    @apply hover:bg-sidebar-accent/20;
  }

  /* Active chat styling (background handled by Tailwind in component) */
  .chat-list-item--active {
    @apply font-semibold;
  }

  /* Sidebar icons use DARK JADE in light mode */
  .chat-pane [data-icon] {
    color: var(--sidebar-icon);
  }

  /* === Chat Main Panel === */

  .chat-main {
    @apply flex h-full flex-col bg-background min-w-0 relative;
  }

  .chat-main-header {
    @apply flex items-center justify-between px-4 py-2;
  }

  /* Scroll container for messages + sticky input */
  .chat-scroll-container {
    @apply flex-1 overflow-y-auto overflow-x-hidden min-w-0;
  }

  /* Floating scroll-to-bottom button - positioned above sticky input wrapper */
  .scroll-to-bottom-button {
    @apply absolute left-1/2 -translate-x-1/2 z-20 rounded-full shadow-md;
    /* Position above the sticky wrapper using negative top */
    top: -48px;
    /* Fade animation */
    opacity: 0;
    pointer-events: none;
    transition: opacity 150ms ease-in-out;
  }

  .scroll-to-bottom-button.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .chat-main-empty {
    @apply flex h-full flex-col items-center justify-center px-4 text-center text-sm text-muted-foreground;
  }

  /* Chat messages - spec: pure white user, jade rim AI */
  .chat-message {
    border-radius: var(--radius-lg);
    transition: box-shadow var(--duration-medium) var(--easing-default);
  }

  .chat-message:hover {
    box-shadow: var(--shadow-2);
  }

  /* User messages: PURE WHITE fill in light mode, Slate 700 in dark */
  .chat-message--user {
    @apply bg-card text-card-foreground;
    border: 1px solid var(--border);
  }

  /* AI messages: jade border in light, GLOW JADE rim in dark */
  .chat-message--ai {
    @apply bg-card text-card-foreground;
  }

  .chat-message--ai {
    border: 1px solid var(--jade-primary);
  }

  .dark .chat-message--ai {
    border: 1px solid var(--glow-jade);
    border-opacity: 0.3;
  }

  /* Code blocks in messages: Neutral 100 in light, Jade Black in dark */
  .chat-message code,
  .chat-message pre {
    background: var(--muted);
  }

  /* Chat input */
  .chat-input-shell {
    @apply bg-background/95 px-4 pb-2;
  }

  .chat-input {
    @apply w-full resize-none rounded border bg-card px-3 py-2 text-sm outline-none ring-offset-0;
    box-shadow: var(--shadow-1);
    transition: box-shadow var(--duration-fast) var(--easing-default);
  }

  .chat-input:focus-visible {
    outline: 3px solid var(--focus-ring-outer);
    outline-offset: 0;
    box-shadow:
      var(--shadow-1),
      0 0 0 2px var(--focus-ring-inner);
  }

  .chat-input-row {
    @apply flex items-center gap-2;
  }

  /* === Workspace Panel Shells (left/right slabs) === */

  .workspace-panel-left {
    position: relative;
    box-shadow: var(--shadow-1);
    z-index: 5;
  }

  .workspace-panel-right {
    position: relative;
    z-index: 10;
    border-left: 1px solid var(--border);
    /* Subtle, directional shadow so the right panel floats
       above the center content without feeling heavy. */
    box-shadow:
      -6px 0 16px rgba(28, 26, 24, 0.12),
      -2px 0 6px rgba(28, 26, 24, 0.08);
  }

  /* === Special UI Elements === */

  /* Tooltips */
  .tooltip {
    @apply rounded-sm border border-border bg-popover px-3 py-2 text-xs text-popover-foreground;
    box-shadow: var(--shadow-2);
    font-family: var(--font-sans);
  }

  /* Progress bars */
  .progress-bar {
    @apply h-1 overflow-hidden rounded-full;
    background-color: oklch(from var(--jade-primary) l c h / var(--opacity-subtle));
  }

  .progress-bar__fill {
    @apply h-full transition-all;
    background-color: var(--gold);
    transition-duration: var(--duration-medium);
    transition-timing-function: var(--easing-default);
  }

  /* Badges / Tags */
  .badge {
    @apply inline-flex items-center rounded-sm border px-2.5 py-0.5 text-xs font-medium;
    background-color: oklch(from var(--jade-primary) l c h / 0.1);
    border-color: var(--jade-primary);
    color: var(--jade-foreground);
    font-family: var(--font-sans);
  }

  /* Document tree connectors */
  .tree-children {
    position: relative;
    margin-left: 0.75rem;
    /* 12px */
    padding-left: 0.75rem;
  }

  .tree-children::before {
    content: "";
    position: absolute;
    inset-inline-start: 0.25rem;
    top: 0.25rem;
    bottom: 0.25rem;
    border-left: 1px solid var(--border);
    opacity: var(--opacity-subtle);
    pointer-events: none;
  }

  /* ============================================================================
     CODEMIRROR LIVE PREVIEW STYLES
     Obsidian-style WYSIWYG markdown rendering
     ============================================================================ */

  /* Hidden marks (*, **, #, etc.) - cursor reveal handled by plugin */
  .cm-md-hidden {
    display: none;
  }

  /* Headings - serif font, progressively sized */
  .cm-md-heading1 {
    font-size: 2em;
    font-weight: 700;
    line-height: 1.2;
    padding-top: 0.5em;
  }

  .cm-md-heading2 {
    font-size: 1.5em;
    font-weight: 600;
    line-height: 1.3;
    padding-top: 0.4em;
  }

  .cm-md-heading3 {
    font-size: 1.25em;
    font-weight: 600;
    line-height: 1.4;
    padding-top: 0.3em;
  }

  .cm-md-heading4 {
    font-size: 1.1em;
    font-weight: 600;
    line-height: 1.4;
  }

  .cm-md-heading5 {
    font-size: 1em;
    font-weight: 600;
    line-height: 1.5;
  }

  .cm-md-heading6 {
    font-size: 0.9em;
    font-weight: 600;
    line-height: 1.5;
    color: var(--muted-foreground);
  }

  /* Emphasis - bold, italic, combined */
  .cm-md-bold {
    font-weight: 700;
  }

  .cm-md-italic {
    font-style: italic;
  }

  .cm-md-bold-italic {
    font-weight: 700;
    font-style: italic;
  }

  .cm-md-strikethrough {
    text-decoration: line-through;
    color: var(--muted-foreground);
  }

  /* Code - monospace with subtle background */
  .cm-md-inline-code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    background-color: var(--muted);
    padding: 0.1em 0.3em;
    border-radius: 3px;
  }

  .cm-md-code-block {
    font-family: var(--font-mono);
    font-size: 0.9em;
    background-color: var(--muted);
  }

  /* Links - underlined with subtle icon */
  .cm-md-link {
    color: var(--jade-primary);
    text-decoration: underline;
    text-decoration-color: var(--jade-primary);
    text-underline-offset: 2px;
    cursor: pointer;
  }

  .cm-md-link:hover {
    text-decoration-thickness: 2px;
  }

  .cm-md-link-url {
    color: var(--muted-foreground);
    font-size: 0.9em;
  }

  .cm-md-link-icon {
    color: var(--muted-foreground);
    font-size: 0.8em;
    vertical-align: super;
  }

  /* Lists */
  .cm-md-list-marker {
    color: var(--muted-foreground);
  }

  .cm-md-checkbox {
    font-family: var(--font-mono);
  }

  .cm-md-checkbox-checked {
    color: var(--jade-primary);
  }

  /* Other block elements */
  .cm-md-blockquote {
    border-left: 3px solid var(--border);
    padding-left: 1em;
    color: var(--muted-foreground);
  }

  .cm-md-hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: 1em 0;
  }

  /* ============================================================================
     AI DECORATIONS
     ============================================================================ */

  /* Base AI decoration styles */
  .ai-decoration {
    /* Base styles for all AI decorations */
  }

  /* AI suggestion - pending review (warm amber gradient with accent border) */
  .ai-suggestion {
    background: linear-gradient(
      to bottom,
      rgba(200, 151, 62, 0.15) 0%,
      rgba(200, 151, 62, 0.08) 100%
    );
    border-left: 2px solid var(--theme-accent);
    padding-left: 1rem;
    margin-left: -1rem;
    position: relative;
  }

  .dark .ai-suggestion {
    background: linear-gradient(
      to bottom,
      rgba(228, 184, 102, 0.12) 0%,
      rgba(228, 184, 102, 0.05) 100%
    );
  }

  /* AI accepted - confirmed changes (subtle success tint) */
  .ai-accepted {
    background-color: oklch(from var(--success) l c h / 0.1);
  }

  /* AI rejected - declined changes (subtle error tint with strikethrough) */
  .ai-rejected {
    background-color: oklch(from var(--error) l c h / 0.1);
    text-decoration: line-through;
    text-decoration-color: var(--error);
  }

}