{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-11-09T19:37:05.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "req_import_merge_simple",
      "parentId": "fld_import_merge",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "1. Import Merge (Simple Zip)",
      "description": "Merge mode: Upsert documents from zip file. Auto-creates folders, updates existing docs.",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload a zip file containing markdown documents",
            "type": "file",
            "fileName": "test-import.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698740000000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.summary) {\n  console.log('\ud83d\udcca Import Summary:');\n  console.log('  \u2705 Created:', response.summary.created);\n  console.log('  \ud83d\udd04 Updated:', response.summary.updated);\n  console.log('  \u274c Failed:', response.summary.failed);\n  console.log('  \ud83d\udcc1 Total:', response.summary.total);\n}\nif (response && response.details && response.details.length > 0) {\n  console.log('\u26a0\ufe0f  Errors:', response.details.length);\n  response.details.forEach(err => {\n    console.log('  -', err.file, ':', err.error);\n  });\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_merge_nested",
      "parentId": "fld_import_merge",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "2. Import Merge (Nested Folders)",
      "description": "Import zip with nested folder structure (e.g. Characters/Villains/doc.md)",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload zip with nested folders",
            "type": "file",
            "fileName": "nested-structure.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739900000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.documents) {\n  console.log('\ud83d\udcc4 Imported Documents:');\n  response.documents.forEach(doc => {\n    console.log('  -', doc.path);\n  });\n}\nconsole.log('\\n\ud83d\udca1 Tip: Check project tree to verify folder hierarchy');\nconsole.log('   GET /api/projects/' + insomnia.environment.get('project_id') + '/tree');",
      "_type": "request"
    },
    {
      "_id": "req_import_merge_duplicates",
      "parentId": "fld_import_merge",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "3. Import Merge (Duplicate Names - Upsert)",
      "description": "Import documents that already exist - should UPDATE existing docs, not fail",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload zip with same names as existing docs",
            "type": "file",
            "fileName": "duplicate-test.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739800000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.summary) {\n  console.log('\ud83d\udcca Upsert Behavior Check:');\n  console.log('  \ud83c\udd95 Created:', response.summary.created);\n  console.log('  \ud83d\udd04 Updated:', response.summary.updated, '\u2190 Should have updates');\n  if (response.summary.updated > 0) {\n    console.log('  \u2705 Upsert working correctly');\n  } else {\n    console.log('  \u26a0\ufe0f  Expected some updates for duplicates');\n  }\n}",
      "_type": "request"
    },
    {
      "_id": "req_get_tree_after_merge",
      "parentId": "fld_import_merge",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/projects/{{ _.project_id }}/tree",
      "name": "4. View Tree (After Merge)",
      "description": "Visualize project structure after merge import",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [],
      "authentication": {},
      "metaSortKey": -1698739700000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response) {\n  console.log('\ud83c\udf33 Project Tree Structure:');\n  console.log('\ud83d\udcc1 Root folders:', response.folders?.length || 0);\n  console.log('\ud83d\udcc4 Root documents:', response.documents?.length || 0);\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_replace_mode",
      "parentId": "fld_import_replace",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import/replace",
      "name": "5. Import Replace (Clear All First)",
      "description": "Replace mode: DELETE all existing documents, then import. Dangerous!",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload zip file that will REPLACE all existing content",
            "type": "file",
            "fileName": "fresh-start.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739600000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.summary) {\n  console.log('\ud83d\uddd1\ufe0f  Replace Mode Results:');\n  console.log('  \u2705 Created:', response.summary.created, '\u2190 All documents are new');\n  console.log('  \ud83d\udd04 Updated:', response.summary.updated, '\u2190 Should be 0 (all deleted first)');\n  console.log('  \u274c Failed:', response.summary.failed);\n  console.log('\\n\u26a0\ufe0f  WARNING: Old content was deleted!');\n}",
      "_type": "request"
    },
    {
      "_id": "req_get_tree_after_replace",
      "parentId": "fld_import_replace",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/projects/{{ _.project_id }}/tree",
      "name": "6. View Tree (After Replace)",
      "description": "Verify old content deleted, only new content exists",
      "method": "GET",
      "body": {},
      "parameters": [],
      "headers": [],
      "authentication": {},
      "metaSortKey": -1698739500000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response) {\n  console.log('\ud83c\udf33 Project Tree After Replace:');\n  console.log('\ud83d\udcc1 Root folders:', response.folders?.length || 0);\n  console.log('\ud83d\udcc4 Root documents:', response.documents?.length || 0);\n  console.log('\\n\ud83d\udca1 Should only contain documents from the zip file');\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_empty_zip",
      "parentId": "fld_import_edge_cases",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "7. [EDGE] Empty Zip File",
      "description": "Import empty zip - should succeed with 0 documents",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload empty zip file",
            "type": "file",
            "fileName": "empty.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739400000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nconst status = insomnia.response.code;\nif (status === 200 && response.summary.total === 0) {\n  console.log('\u2705 Empty zip handled correctly: 200 OK with 0 documents');\n} else {\n  console.log('Status:', status);\n  console.log('Total:', response.summary?.total);\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_invalid_zip",
      "parentId": "fld_import_edge_cases",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "8. [EDGE] Invalid Zip Structure",
      "description": "Import zip with invalid content - should report errors gracefully",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload corrupted or invalid zip",
            "type": "file",
            "fileName": "invalid.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739300000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.details) {\n  console.log('\u26a0\ufe0f  Error handling check:');\n  console.log('  Errors reported:', response.details.length);\n  console.log('  Failed count:', response.summary?.failed || 0);\n  response.details.forEach(err => {\n    console.log('  -', err.error);\n  });\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_slash_sanitization",
      "parentId": "fld_import_edge_cases",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "9. [EDGE] Document Name Sanitization",
      "description": "Import documents with slashes in names - should sanitize to hyphens",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "files",
            "value": "",
            "description": "Upload zip with docs named 'Hero/Villain.md' (should become 'Hero-Villain')",
            "type": "file",
            "fileName": "slash-test.zip"
          }
        ]
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739200000,
      "isPrivate": false,
      "afterResponseScript": "const response = insomnia.response.json();\nif (response && response.documents) {\n  console.log('\ud83d\udd27 Name Sanitization Check:');\n  response.documents.forEach(doc => {\n    if (doc.name.includes('/')) {\n      console.log('  \u274c FAIL: Name still has slash:', doc.name);\n    } else if (doc.name.includes('-')) {\n      console.log('  \u2705 OK: Slash converted to hyphen:', doc.name);\n    } else {\n      console.log('  \u2139\ufe0f  Name:', doc.name);\n    }\n  });\n}",
      "_type": "request"
    },
    {
      "_id": "req_import_no_files",
      "parentId": "fld_import_edge_cases",
      "modified": 1698739200000,
      "created": 1698739200000,
      "url": "{{ _.base_url }}/api/import",
      "name": "10. [EDGE] No Files Provided",
      "description": "Call import endpoint without any files - should return 400 error",
      "method": "POST",
      "body": {
        "mimeType": "multipart/form-data",
        "params": []
      },
      "parameters": [],
      "headers": [
        {
          "name": "X-Project-ID",
          "value": "{{ _.project_id }}"
        }
      ],
      "authentication": {},
      "metaSortKey": -1698739100000,
      "isPrivate": false,
      "afterResponseScript": "const status = insomnia.response.code;\nif (status === 400) {\n  console.log('\u2705 Validation working: Got expected 400 error for missing files');\n} else {\n  console.log('\u274c Expected 400, got:', status);\n}",
      "_type": "request"
    },
    {
      "_id": "fld_import_merge",
      "parentId": "wrk_file_system",
      "modified": 1698739200000,
      "created": 1698739200000,
      "name": "Import - Merge Mode",
      "description": "Upsert documents (create or update existing)",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1698737000000,
      "_type": "request_group"
    },
    {
      "_id": "fld_import_replace",
      "parentId": "wrk_file_system",
      "modified": 1698739200000,
      "created": 1698739200000,
      "name": "Import - Replace Mode",
      "description": "Delete all, then import (dangerous!)",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1698736000000,
      "_type": "request_group"
    },
    {
      "_id": "fld_import_edge_cases",
      "parentId": "wrk_file_system",
      "modified": 1698739200000,
      "created": 1698739200000,
      "name": "Import - Edge Cases",
      "description": "Error handling and validation tests for import",
      "environment": {},
      "environmentPropertyOrder": null,
      "metaSortKey": -1698735000000,
      "_type": "request_group"
    },
    {
      "_id": "wrk_file_system",
      "parentId": null,
      "modified": 1698739200000,
      "created": 1698739200000,
      "name": "File System - Import",
      "description": "Bulk import operations with merge and replace modes",
      "scope": "collection",
      "_type": "workspace"
    },
    {
      "_id": "env_base",
      "parentId": "wrk_file_system",
      "modified": 1698739200000,
      "created": 1698739200000,
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:8080",
        "project_id": "00000000-0000-0000-0000-000000000001",
        "test_project_id": "00000000-0000-0000-0000-000000000001",
        "folder_id": "",
        "subfolder_id": "",
        "document_id": "",
        "root_document_id": "",
        "weapons_folder_id": "",
        "nested_doc_id": "",
        "chapters_folder_id": "",
        "chapter1_id": "",
        "archive_folder_id": ""
      },
      "dataPropertyOrder": {
        "&": [
          "base_url",
          "project_id",
          "test_project_id",
          "folder_id",
          "subfolder_id",
          "document_id",
          "root_document_id",
          "weapons_folder_id",
          "nested_doc_id",
          "chapters_folder_id",
          "chapter1_id",
          "archive_folder_id"
        ]
      },
      "color": null,
      "isPrivate": false,
      "metaSortKey": 1698739200000,
      "_type": "environment"
    }
  ]
}