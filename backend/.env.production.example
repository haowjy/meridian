# Production Environment Configuration for Railway
# Copy this to Railway's environment variables dashboard
# DO NOT commit actual values to git

# Server Configuration
# Railway automatically injects PORT - do not set manually
# PORT is auto-injected by Railway
ENVIRONMENT=prod

# === Database Connection ===
# Use Transaction Mode (Port 6543) for Railway
# Railway doesn't have static IP, so use pooled connection
# Get from: Supabase Dashboard → Settings → Database → Connection String → Transaction mode
SUPABASE_DB_URL=postgresql://postgres.[PROJECT]:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres

# === Supabase Auth ===
# Get from: Supabase Dashboard → Settings → API

# Project URL (REQUIRED for JWT verification)
# The JWKS URL is auto-constructed from this: {SUPABASE_URL}/auth/v1/.well-known/jwks.json
SUPABASE_URL=https://your-project.supabase.co

# Use the NEW "secret key" format (sb_secret_...), NOT legacy JWT
# For backend/server use - keep this secret!
# Get from: Supabase Dashboard → Settings → API → Service role secret
SUPABASE_KEY=sb_secret_your-key-here

# === CORS - Frontend URLs ===
# IMPORTANT: Add your Vercel deployment URLs
# Format: Comma-separated list of allowed origins
# Include:
# - Production: https://your-app.vercel.app
# - Preview deployments: Use wildcard https://*.vercel.app (if supported by CORS library)
#   OR list each preview URL individually
# - Local dev (optional): http://localhost:3000
#
# Example:
# CORS_ORIGINS=https://meridian.vercel.app,https://*.vercel.app,http://localhost:3000
CORS_ORIGINS=https://your-app.vercel.app

# === LLM Configuration ===
# At least ONE provider API key required

# Anthropic (Claude)
# Get your API key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-your-key-here

# OpenRouter (Multi-provider)
# Get your API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-your-key-here

# Default LLM provider and model
DEFAULT_PROVIDER=openrouter
DEFAULT_MODEL=moonshotai/kimi-k2-thinking

# === Debug Mode ===
# IMPORTANT: Set to false in production
# When false: Disables SSE event IDs for better performance
DEBUG=false

# === DO NOT SET IN PRODUCTION ===
# These are development-only stubs, removed in production:
# - TEST_USER_ID (auth uses real JWT validation)
# - TEST_PROJECT_ID (projects created via API)

# Default max number of tool call round trips before stopping an assistant turn
MAX_TOOL_ROUNDS=10
